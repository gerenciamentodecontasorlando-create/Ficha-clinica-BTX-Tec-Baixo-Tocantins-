<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Ficha Cl√≠nica Digital - BTX-TEC</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      --bg: #020617;
      --card: #020617;
      --azul1: #0f172a;
      --azul2: #1d4ed8;
      --ciano: #22d3ee;
      --borda: #172554;
      --texto: #e5e7eb;
      --texto-suave: #9ca3af;
      --accent: #38bdf8;
      --danger: #f97373;
      --ok: #4ade80;
      --shadow: 0 10px 30px rgba(15,23,42,0.75);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: radial-gradient(circle at top, #0f172a 0, #020617 55%, #000 100%);
      color: var(--texto);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
    }

    .app-container {
      width: 100%;
      max-width: 1120px;
      margin: 24px;
      background: linear-gradient(145deg, #020617, #020617);
      border-radius: 18px;
      box-shadow: var(--shadow);
      border: 1px solid rgba(148, 163, 184, 0.22);
      overflow: hidden;
    }

    header {
      padding: 16px 20px 10px;
      border-bottom: 1px solid rgba(148, 163, 184, 0.15);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      background: radial-gradient(circle at left top, #1e293b, #020617);
    }

    .marca {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .marca-logo {
      width: 32px;
      height: 32px;
      border-radius: 10px;
      background: radial-gradient(circle at 30% 20%, #22d3ee, #0f172a 55%, #020617);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.5),
        0 0 18px rgba(56, 189, 248, 0.7);
    }

    .marca-logo span {
      font-size: 16px;
      font-weight: 700;
      color: #e5e7eb;
      letter-spacing: 0.5px;
    }

    .marca-texto {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .marca-nome {
      font-size: 16px;
      font-weight: 600;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: #e5e7eb;
    }

    .marca-sub {
      font-size: 12px;
      color: var(--texto-suave);
    }

    .header-info {
      font-size: 11px;
      color: var(--texto-suave);
      text-align: right;
    }

    .tabs {
      display: flex;
      gap: 6px;
      padding: 8px 10px 10px;
      background: #020617;
      border-bottom: 1px solid rgba(148, 163, 184, 0.15);
      overflow-x: auto;
    }

    .tab-btn {
      border: 1px solid transparent;
      background: rgba(15, 23, 42, 0.85);
      color: var(--texto-suave);
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 13px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
      transition: 0.18s ease;
    }

    .tab-btn span.icon {
      font-size: 14px;
    }

    .tab-btn.active {
      background: linear-gradient(135deg, #1d4ed8, #22d3ee);
      color: #f9fafb;
      border-color: rgba(148, 163, 184, 0.3);
      box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.7),
        0 0 18px rgba(37, 99, 235, 0.8);
    }

    .tab-btn:hover:not(.active) {
      border-color: rgba(148, 163, 184, 0.35);
      background: rgba(15, 23, 42, 0.98);
    }

    .conteudo {
      padding: 18px 18px 22px;
      display: grid;
      grid-template-columns: minmax(0, 2.2fr) minmax(0, 1.3fr);
      gap: 16px;
    }

    @media (max-width: 900px) {
      .conteudo {
        grid-template-columns: minmax(0, 1fr);
      }
      header {
        flex-direction: column;
        align-items: flex-start;
      }
      .header-info {
        text-align: left;
      }
    }

    .card {
      background: radial-gradient(circle at top, #020617, #020617);
      border-radius: 16px;
      padding: 14px 14px 16px;
      border: 1px solid rgba(51, 65, 85, 0.85);
      box-shadow: 0 12px 26px rgba(15, 23, 42, 0.7);
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.1), transparent 55%);
      opacity: 0.9;
      pointer-events: none;
    }

    .card h2 {
      margin: 0 0 10px;
      font-size: 18px;
      font-weight: 600;
      letter-spacing: 0.03em;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card h2 span.icon {
      font-size: 19px;
    }

    .card p.descricao {
      margin: 0 0 12px;
      font-size: 13px;
      color: var(--texto-suave);
    }

    .linha {
      display: flex;
      gap: 8px;
      margin-bottom: 8px;
    }

    .linha.col {
      flex-direction: column;
    }

    .campo {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 13px;
    }

    label {
      font-size: 12px;
      color: var(--texto-suave);
    }

    input,
    textarea {
      background: rgba(15, 23, 42, 0.95);
      border-radius: 10px;
      border: 1px solid rgba(51, 65, 85, 0.9);
      padding: 7px 9px;
      color: var(--texto);
      font-size: 13px;
      resize: vertical;
      min-height: 32px;
    }

    textarea {
      min-height: 60px;
    }

    input:focus,
    textarea:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.7);
    }

    .acoes {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    button.btn {
      border-radius: 1000px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      background: rgba(15, 23, 42, 1);
      color: var(--texto);
      font-size: 13px;
      padding: 6px 12px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      transition: 0.18s ease;
      white-space: nowrap;
    }

    button.btn.primario {
      background: linear-gradient(135deg, #1d4ed8, #22c55e);
      border-color: rgba(34, 197, 94, 0.5);
      color: #f9fafb;
      box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.7),
        0 0 16px rgba(22, 163, 74, 0.85);
    }

    button.btn.destrutivo {
      border-color: rgba(248, 113, 113, 0.6);
      color: #fecaca;
    }

    button.btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 14px rgba(15, 23, 42, 0.8);
    }

    button.btn.destrutivo:hover {
      background: rgba(127, 29, 29, 0.95);
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: rgba(15, 23, 42, 0.9);
      border-radius: 999px;
      padding: 3px 9px;
      font-size: 11px;
      color: var(--texto-suave);
      border: 1px solid rgba(148, 163, 184, 0.5);
      margin-bottom: 6px;
    }

    .pill span.dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: var(--ok);
      box-shadow: 0 0 8px rgba(74, 222, 128, 0.9);
    }

    .atalhos-meds {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 6px;
    }

    .atalho-pill {
      font-size: 11px;
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid rgba(51, 65, 85, 0.9);
      background: rgba(15, 23, 42, 0.9);
      color: var(--texto-suave);
      cursor: pointer;
      white-space: nowrap;
      transition: 0.15s ease;
    }

    .atalho-pill:hover {
      background: rgba(30, 64, 175, 0.9);
      color: #e5e7eb;
      border-color: rgba(37, 99, 235, 0.9);
    }

    .tabela-orc {
      width: 100%;
      border-collapse: collapse;
      margin-top: 4px;
      font-size: 12px;
    }

    .tabela-orc th,
    .tabela-orc td {
      border-bottom: 1px solid rgba(51, 65, 85, 0.9);
      padding: 4px 4px;
    }

    .tabela-orc th {
      text-align: left;
      font-weight: 500;
      color: var(--texto-suave);
    }

    .tabela-orc input {
      font-size: 12px;
      padding: 4px 6px;
    }

    .total-orc {
      margin-top: 8px;
      font-size: 14px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .badge-total {
      padding: 3px 10px;
      border-radius: 999px;
      background: rgba(22, 163, 74, 0.2);
      border: 1px solid rgba(34, 197, 94, 0.75);
      color: #bbf7d0;
      font-size: 12px;
    }

    .secao {
      display: none;
    }

    .secao.ativa {
      display: block;
    }

    /* Impress√£o: mostra s√≥ a se√ß√£o escolhida */
    @media print {
      body {
        background: #fff;
      }
      .app-container,
      header,
      .tabs,
      .conteudo {
        all: unset;
        display: block;
      }
      header,
      .tabs {
        display: none !important;
      }
      .card {
        box-shadow: none;
        border-radius: 0;
        border: none;
      }
      .somente-impressao {
        display: block !important;
      }
      .nao-imprimir {
        display: none !important;
      }
    }
  </style>
</head>

<body>
  <div class="app-container nao-imprimir">
    <header>
      <div class="marca">
        <div class="marca-logo">
          <span>BTX</span>
        </div>
        <div class="marca-texto">
          <div class="marca-nome">BTX-TEC</div>
          <div class="marca-sub">Baixo Tocantins ‚Ä¢ Ficha Cl√≠nica Digital</div>
        </div>
      </div>
      <div class="header-info">
        <div>Prontu√°rio, receitu√°rio, atestado e or√ßamento em um s√≥ lugar.</div>
        <div>Marca discreta ‚Ä¢ Dados do dentista configur√°veis ‚Ä¢ Uso livre entre
          dentistas.</div>
      </div>
    </header>

    <nav class="tabs">
      <button class="tab-btn active" data-alvo="secao-dentista">
        <span class="icon">üë§</span> Dentista
      </button>
      <button class="tab-btn" data-alvo="secao-ficha">
        <span class="icon">üìã</span> Ficha Cl√≠nica
      </button>
      <button class="tab-btn" data-alvo="secao-receita">
        <span class="icon">üíä</span> Receitu√°rio
      </button>
      <button class="tab-btn" data-alvo="secao-atestado">
        <span class="icon">üìù</span> Atestado
      </button>
      <button class="tab-btn" data-alvo="secao-orcamento">
        <span class="icon">üí∞</span> Or√ßamentos
      </button>
    </nav>

    <main class="conteudo">
      <!-- COLUNA ESQUERDA -->
      <section>
        <!-- DADOS DO DENTISTA -->
        <div class="card secao ativa" id="secao-dentista">
          <h2><span class="icon">üë§</span> Dados do dentista</h2>
          <p class="descricao">
            Preencha uma vez. Esses dados ir√£o para o cabe√ßalho do receitu√°rio,
            atestado e or√ßamento. Nada fica fixo com seu nome no c√≥digo.
          </p>

          <div class="linha">
            <div class="campo">
              <label for="dentista_nome">Nome do dentista</label>
              <input type="text" id="dentista_nome" />
            </div>
          </div>

          <div class="linha">
            <div class="campo">
              <label for="dentista_cro">CRO</label>
              <input type="text" id="dentista_cro" />
            </div>
            <div class="campo">
              <label for="dentista_especialidade">Especialidade</label>
              <input type="text" id="dentista_especialidade" />
            </div>
          </div>

          <div class="linha">
            <div class="campo">
              <label for="dentista_telefone">Telefone / WhatsApp</label>
              <input type="text" id="dentista_telefone" />
            </div>
            <div class="campo">
              <label for="dentista_endereco">Endere√ßo profissional</label>
              <input type="text" id="dentista_endereco" />
            </div>
          </div>

          <div class="acoes">
            <button class="btn primario" id="btnSalvarDentista">
              üíæ Salvar dados do dentista
            </button>
            <button class="btn destrutivo" id="btnLimparDentista">
              üßπ Limpar dados
            </button>
          </div>
        </div>

        <!-- FICHA CL√çNICA -->
        <div class="card secao" id="secao-ficha">
          <h2><span class="icon">üìã</span> Ficha Cl√≠nica do Paciente</h2>
          <p class="descricao">
            Campos livres para anamnese e evolu√ß√£o no formato que voc√™ j√° usa
            no consult√≥rio.
          </p>

          <div class="linha">
            <div class="campo">
              <label for="paciente_nome">Nome completo</label>
              <input type="text" id="paciente_nome" />
            </div>
          </div>

          <div class="linha">
            <div class="campo">
              <label for="paciente_nascimento">Data de nascimento</label>
              <input type="date" id="paciente_nascimento" />
            </div>
            <div class="campo">
              <label for="paciente_idade">Idade</label>
              <input type="text" id="paciente_idade" />
            </div>
          </div>

          <div class="linha">
            <div class="campo">
              <label for="paciente_endereco">Endere√ßo</label>
              <input type="text" id="paciente_endereco" />
            </div>
          </div>

          <div class="linha">
            <div class="campo">
              <label for="paciente_telefone">Telefone</label>
              <input type="text" id="paciente_telefone" />
            </div>
            <div class="campo">
              <label for="paciente_mae">Nome da m√£e</label>
              <input type="text" id="paciente_mae" />
            </div>
          </div>

          <div class="linha">
            <div class="campo">
              <label for="paciente_pai">Nome do pai</label>
              <input type="text" id="paciente_pai" />
            </div>
          </div>

          <div class="linha col">
            <div class="campo">
              <label for="queixa">Queixa principal</label>
              <textarea id="queixa"></textarea>
            </div>
          </div>

          <div class="linha col">
            <div class="campo">
              <label for="historia">Hist√≥ria cl√≠nica</label>
              <textarea id="historia"></textarea>
            </div>
          </div>

          <div class="linha col">
            <div class="campo">
              <label for="procedimentos">Procedimentos / anota√ß√µes cl√≠nicas</label>
              <textarea id="procedimentos"></textarea>
            </div>
          </div>

          <div class="linha col">
            <div class="campo">
              <label for="valores">Valores pagos / datas</label>
              <textarea id="valores"></textarea>
            </div>
          </div>

          <div class="acoes">
            <button class="btn primario" id="btnSalvarFicha">
              üíæ Salvar ficha (local)
            </button>
            <button class="btn" onclick="imprimirSecao('secao-ficha')">
              üñ®Ô∏è Imprimir / PDF
            </button>
          </div>
        </div>
      </section>

      <!-- COLUNA DIREITA -->
      <section>
        <!-- RECEITU√ÅRIO -->
        <div class="card secao" id="secao-receita">
          <h2><span class="icon">üíä</span> Receitu√°rio odontol√≥gico</h2>
          <p class="descricao">
            Cabe√ßalho autom√°tico com seus dados. Use os atalhos ou digite a
            prescri√ß√£o manualmente.
          </p>

          <div class="pill">
            <span class="dot"></span>
            Dados do dentista v√™m da aba "Dentista".
          </div>

          <div class="linha">
            <div class="campo">
              <label for="receita_paciente">Paciente</label>
              <input type="text" id="receita_paciente" />
            </div>
            <div class="campo">
              <label for="receita_data">Data</label>
              <input type="date" id="receita_data" />
            </div>
          </div>

          <label>Atalhos de medicamentos</label>
          <div class="atalhos-meds">
            <button class="atalho-pill" data-med="Paracetamol 750 mg, tomar 1 comprimido de 8/8h por 3 dias.">
              Paracetamol 750 mg
            </button>
            <button class="atalho-pill" data-med="Dipirona 500 mg, tomar 1 comprimido de 6/6h se dor ou febre.">
              Dipirona 500 mg
            </button>
            <button class="atalho-pill" data-med="Ibuprofeno 600 mg, tomar 1 comprimido de 8/8h por 5 dias.">
              Ibuprofeno 600 mg
            </button>
            <button class="atalho-pill" data-med="Amoxicilina 500 mg, tomar 1 c√°psula de 8/8h por 7 dias.">
              Amoxicilina 500 mg
            </button>
            <button class="atalho-pill" data-med="Amoxicilina + Clavulanato 875/125 mg, tomar 1 comprimido de 12/12h por 7 dias.">
              Amox + Clav
            </button>
            <button class="atalho-pill" data-med="Azitromicina 500 mg, tomar 1 comprimido ao dia por 3 dias.">
              Azitromicina 500 mg
            </button>
          </div>

          <div class="linha col">
            <div class="campo">
              <label for="receita_texto">Prescri√ß√£o</label>
              <textarea id="receita_texto"></textarea>
            </div>
          </div>

          <div class="acoes">
            <button class="btn primario" onclick="imprimirSecao('secao-receita')">
              üñ®Ô∏è Imprimir / PDF
            </button>
          </div>
        </div>

        <!-- ATESTADO -->
        <div class="card secao" id="secao-atestado">
          <h2><span class="icon">üìù</span> Atestado odontol√≥gico</h2>
          <p class="descricao">
            Use texto livre para afastamento, escola ou trabalho. Cabe√ßalho
            usa os dados do dentista.
          </p>

          <div class="pill">
            <span class="dot"></span>
            Os dados de cabe√ßalho vir√£o da aba "Dentista".
          </div>

          <div class="linha">
            <div class="campo">
              <label for="atestado_paciente">Paciente</label>
              <input type="text" id="atestado_paciente" />
            </div>
            <div class="campo">
              <label for="atestado_data">Data</label>
              <input type="date" id="atestado_data" />
            </div>
          </div>

          <div class="linha col">
            <div class="campo">
              <label for="atestado_texto">Texto do atestado</label>
              <textarea id="atestado_texto"></textarea>
            </div>
          </div>

          <div class="acoes">
            <button class="btn primario" onclick="imprimirSecao('secao-atestado')">
              üñ®Ô∏è Imprimir / PDF
            </button>
          </div>
        </div>

        <!-- OR√áAMENTO -->
        <div class="card secao" id="secao-orcamento">
          <h2><span class="icon">üí∞</span> Or√ßamento odontol√≥gico</h2>
          <p class="descricao">
            Preencha os procedimentos e valores. O total √© calculado
            automaticamente.
          </p>

          <div class="pill">
            <span class="dot"></span>
            Cabe√ßalho com dados do dentista, se desejar imprimir.
          </div>

          <div class="linha">
            <div class="campo">
              <label for="orc_paciente">Paciente</label>
              <input type="text" id="orc_paciente" />
            </div>
            <div class="campo">
              <label for="orc_data">Data</label>
              <input type="date" id="orc_data" />
            </div>
          </div>

          <table class="tabela-orc">
            <thead>
              <tr>
                <th style="width: 60%">Procedimento</th>
                <th style="width: 40%">Valor (R$)</th>
              </tr>
            </thead>
            <tbody id="orc_tbody">
              <tr>
                <td><input type="text" class="orc_proc" /></td>
                <td><input type="number" step="0.01" class="orc_valor" /></td>
              </tr>
              <tr>
                <td><input type="text" class="orc_proc" /></td>
                <td><input type="number" step="0.01" class="orc_valor" /></td>
              </tr>
              <tr>
                <td><input type="text" class="orc_proc" /></td>
                <td><input type="number" step="0.01" class="orc_valor" /></td>
              </tr>
              <tr>
                <td><input type="text" class="orc_proc" /></td>
                <td><input type="number" step="0.01" class="orc_valor" /></td>
              </tr>
              <tr>
                <td><input type="text" class="orc_proc" /></td>
                <td><input type="number" step="0.01" class="orc_valor" /></td>
              </tr>
            </tbody>
          </table>

          <div class="total-orc">
            <span>Total</span>
            <span class="badge-total" id="orc_total">R$ 0,00</span>
          </div>

          <div class="acoes">
            <button class="btn" id="btnAddLinha">
              ‚ûï Adicionar linha
            </button>
            <button class="btn primario" onclick="imprimirSecao('secao-orcamento')">
              üñ®Ô∏è Imprimir / PDF
            </button>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
    // ---- TROCA DE ABAS ----
    function ativarAba(id) {
      document.querySelectorAll(".tab-btn").forEach((btn) => {
        btn.classList.toggle("active", btn.dataset.alvo === id);
      });
      document.querySelectorAll(".secao").forEach((secao) => {
        secao.classList.toggle("ativa", secao.id === id);
      });
    }

    document.querySelectorAll(".tab-btn").forEach((btn) => {
      btn.addEventListener("click", () => ativarAba(btn.dataset.alvo));
    });

    // ---- LOCALSTORAGE DENTISTA ----
    const camposDentista = [
      "dentista_nome",
      "dentista_cro",
      "dentista_especialidade",
      "dentista_telefone",
      "dentista_endereco",
    ];

    function carregarDentista() {
      camposDentista.forEach((id) => {
        const salvo = localStorage.getItem("btx_dentista_" + id);
        if (salvo) {
          const campo = document.getElementById(id);
          if (campo) campo.value = salvo;
        }
      });
    }

    function salvarDentista() {
      camposDentista.forEach((id) => {
        const campo = document.getElementById(id);
        if (campo) {
          localStorage.setItem("btx_dentista_" + id, campo.value.trim());
        }
      });
      alert("Dados do dentista salvos neste dispositivo.");
    }

    function limparDentista() {
      if (!confirm("Apagar todos os dados do dentista neste dispositivo?"))
        return;
      camposDentista.forEach((id) => {
        localStorage.removeItem("btx_dentista_" + id);
        const campo = document.getElementById(id);
        if (campo) campo.value = "";
      });
    }

    document.getElementById("btnSalvarDentista").addEventListener("click", salvarDentista);
    document.getElementById("btnLimparDentista").addEventListener("click", limparDentista);

    // ---- SALVAR FICHA (OPCIONAL: localStorage simples) ----
    function salvarFicha() {
      const dados = {
        nome: document.getElementById("paciente_nome").value,
        nascimento: document.getElementById("paciente_nascimento").value,
        idade: document.getElementById("paciente_idade").value,
        endereco: document.getElementById("paciente_endereco").value,
        tel: document.getElementById("paciente_telefone").value,
        mae: document.getElementById("paciente_mae").value,
        pai: document.getElementById("paciente_pai").value,
        queixa: document.getElementById("queixa").value,
        historia: document.getElementById("historia").value,
        procedimentos: document.getElementById("procedimentos").value,
        valores: document.getElementById("valores").value,
      };
      localStorage.setItem("btx_ficha_ultima", JSON.stringify(dados));
      alert("Ficha salva localmente (√∫ltima ficha).");
    }
    document.getElementById("btnSalvarFicha").addEventListener("click", salvarFicha);

    // ---- ATALHOS DE MEDICA√á√ÉO ----
    document.querySelectorAll(".atalho-pill").forEach((btn) => {
      btn.addEventListener("click", () => {
        const texto = btn.dataset.med || "";
        const campo = document.getElementById("receita_texto");
        if (!campo) return;
        campo.value = (campo.value + "\n" + texto).trim();
      });
    });

    // ---- OR√áAMENTO: SOMA AUTOM√ÅTICA ----
    function atualizarTotal() {
      let total = 0;
      document.querySelectorAll(".orc_valor").forEach((campo) => {
        const val = parseFloat(campo.value.replace(",", "."));
        if (!isNaN(val)) total += val;
      });
      document.getElementById("orc_total").textContent =
        "R$ " + total.toFixed(2).replace(".", ",");
    }

    function adicionarLinha() {
      const tbody = document.getElementById("orc_tbody");
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td><input type="text" class="orc_proc" /></td>
        <td><input type="number" step="0.01" class="orc_valor" /></td>
      `;
      tbody.appendChild(tr);
      tr.querySelector(".orc_valor").addEventListener("input", atualizarTotal);
    }

    document.getElementById("btnAddLinha").addEventListener("click", adicionarLinha);
    document.querySelectorAll(".orc_valor").forEach((campo) => {
      campo.addEventListener("input", atualizarTotal);
    });

    // ---- IMPRESS√ÉO / PDF DE UMA SE√á√ÉO ----
    function imprimirSecao(idSecao) {
      const secao = document.getElementById(idSecao);
      if (!secao) return;
      // Esconde todo o resto na impress√£o via classe
      document.querySelectorAll(".secao").forEach((s) => {
        s.classList.remove("somente-impressao");
      });
      secao.classList.add("somente-impressao");
      window.print();
    }
    window.imprimirSecao = imprimirSecao;

    // ---- INICIALIZA√á√ÉO ----
    document.addEventListener("DOMContentLoaded", () => {
      carregarDentista();
      const hoje = new Date().toISOString().slice(0, 10);
      const rData = document.getElementById("receita_data");
      const aData = document.getElementById("atestado_data");
      const oData = document.getElementById("orc_data");
      if (rData && !rData.value) rData.value = hoje;
      if (aData && !aData.value) aData.value = hoje;
      if (oData && !oData.value) oData.value = hoje;
    });
  </script>
</body>
</html>
