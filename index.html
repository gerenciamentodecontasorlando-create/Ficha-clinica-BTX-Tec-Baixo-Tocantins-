
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Ficha Cl√≠nica Digital ‚Ä¢ BTX-TEC</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      --bg: #020617;
      --card: #0b1120;
      --azul: #1d4ed8;
      --ciano: #22d3ee;
      --borda: #1e293b;
      --texto: #e5e7eb;
      --muted: #9ca3af;
      --radius: 12px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      background: radial-gradient(circle at top, #0f172a 0, #020617 45%, #000 100%);
      color: var(--texto);
      min-height: 100vh;
      padding: 16px;
    }

    .app {
      max-width: 960px;
      margin: 0 auto;
    }

    /* CABE√áALHO / HERO */
    .hero {
      background:
        radial-gradient(circle at 15% 20%, rgba(34,211,238,0.25), transparent 55%),
        radial-gradient(circle at 80% 80%, rgba(37,99,235,0.4), transparent 55%),
        linear-gradient(135deg, #020617, #020617 40%, #020617 100%);
      border-radius: 24px;
      padding: 18px 18px 14px 18px;
      border: 1px solid rgba(148,163,184,0.5);
      box-shadow: 0 20px 50px rgba(15,23,42,0.85);
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .hero-text h1 {
      font-size: 1.4rem;
      font-weight: 700;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      margin-bottom: 4px;
    }

    .hero-text p {
      font-size: 0.85rem;
      color: var(--muted);
    }

    .hero-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.6);
      background: rgba(15,23,42,0.9);
      font-size: 0.75rem;
      color: #e5e7eb;
      margin-bottom: 4px;
    }

    .hero-logo {
      width: 70px;
      height: 70px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      background:
        radial-gradient(circle at 30% 20%, rgba(34,211,238,0.8), transparent 55%),
        radial-gradient(circle at 70% 80%, rgba(37,99,235,0.9), transparent 55%),
        #020617;
      box-shadow: 0 0 18px rgba(37,99,235,0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.4rem;
      color: #e5e7eb;
    }

    .hero-logo span {
      font-weight: 700;
      letter-spacing: 0.08em;
    }

    .hero-sub {
      font-size: 0.75rem;
      color: #9ca3af;
      margin-top: 4px;
    }

    /* CARD GERAL */
    .card {
      background: rgba(11,17,32,0.97);
      border-radius: var(--radius);
      padding: 14px 16px 16px 16px;
      border: 1px solid rgba(30,64,175,0.7);
      box-shadow: 0 16px 40px rgba(15,23,42,0.7);
      margin-bottom: 10px;
    }

    .card h2 {
      font-size: 1rem;
      margin-bottom: 6px;
    }

    .subtext {
      font-size: 0.75rem;
      color: var(--muted);
      margin-bottom: 8px;
    }

    label {
      font-size: 0.8rem;
      display: block;
      margin-bottom: 3px;
    }

    input[type="text"],
    input[type="date"],
    input[type="number"],
    input[type="tel"],
    textarea {
      width: 100%;
      background: rgba(15,23,42,0.95);
      border-radius: 8px;
      border: 1px solid var(--borda);
      color: var(--texto);
      padding: 7px 9px;
      font-size: 0.85rem;
      margin-bottom: 8px;
      outline: none;
    }

    input::placeholder,
    textarea::placeholder {
      color: #64748b;
    }

    input:focus,
    textarea:focus {
      border-color: var(--ciano);
      box-shadow: 0 0 0 1px rgba(34,211,238,0.6);
    }

    textarea {
      min-height: 70px;
      resize: vertical;
    }

    .row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .row > div {
      flex: 1;
      min-width: 140px;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 7px 12px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      background: radial-gradient(circle at top, rgba(34,211,238,0.2), rgba(15,23,42,1));
      color: var(--texto);
      font-size: 0.8rem;
      cursor: pointer;
      margin-top: 4px;
      margin-right: 6px;
      transition: all 0.12s ease;
    }

    .btn:hover {
      transform: translateY(-1px);
      border-color: var(--ciano);
      box-shadow: 0 10px 24px rgba(15,23,42,0.8);
    }

    .btn-sec {
      background: rgba(15,23,42,1);
    }

    /* ABAS */
    .tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 8px;
    }

    .tab-btn {
      padding: 5px 12px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.5);
      background: rgba(15,23,42,0.9);
      font-size: 0.8rem;
      color: var(--texto);
      cursor: pointer;
      transition: all 0.12s ease;
    }

    .tab-btn.active {
      background: linear-gradient(135deg, var(--azul), var(--ciano));
      color: #020617;
      border-color: transparent;
      font-weight: 600;
    }

    .tab-pane {
      display: none;
    }

    .tab-pane.active {
      display: block;
    }

    fieldset {
      border-radius: 10px;
      border: 1px solid rgba(30,64,175,0.7);
      padding: 10px 12px 12px 12px;
      margin-bottom: 10px;
    }

    legend {
      padding: 0 6px;
      font-size: 0.8rem;
      color: #bfdbfe;
    }

    .documento {
      background: radial-gradient(circle at top, rgba(15,23,42,0.98), #020617 80%);
      border-radius: 10px;
      border: 1px solid rgba(148,163,184,0.5);
      padding: 10px 12px 12px 12px;
    }

    .doc-header {
      text-align: center;
      margin-bottom: 8px;
    }

    .doc-titulo {
      font-size: 0.9rem;
      font-weight: 600;
    }

    .doc-profissional {
      font-size: 0.8rem;
      color: #cbd5f5;
    }

    .doc-endereco {
      font-size: 0.75rem;
      color: #9ca3af;
    }

    .linha-assinatura {
      margin-top: 18px;
      text-align: center;
      font-size: 0.8rem;
      color: #9ca3af;
    }

    .linha-assinatura span {
      display: inline-block;
      min-width: 180px;
      border-top: 1px solid #64748b;
      padding-top: 4px;
    }

    .chip-group {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 8px;
    }

    .chip {
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      padding: 4px 8px;
      background: rgba(15,23,42,0.9);
      font-size: 0.72rem;
      cursor: pointer;
    }

    .chip:hover {
      border-color: var(--ciano);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 6px;
      font-size: 0.8rem;
    }

    th, td {
      border: 1px solid #1f2937;
      padding: 6px 8px;
    }

    th {
      background: rgba(15,23,42,0.95);
      text-align: left;
      color: #cbd5f5;
    }

    tfoot td {
      font-weight: 600;
    }

    .no-print {
      /* usado para esconder na impress√£o */
    }

    @media print {
      body {
        background: #ffffff;
        padding: 0;
      }

      .hero,
      .card-config,
      .tabs,
      .no-print {
        display: none !important;
      }

      /* S√≥ imprime a aba escolhida */
      body[data-print="receituario"] #pane-receituario,
      body[data-print="atestado"] #pane-atestado,
      body[data-print="orcamento"] #pane-orcamento {
        display: block !important;
      }

      body[data-print="receituario"] *:not(#pane-receituario):not(#pane-receituario *),
      body[data-print="atestado"] *:not(#pane-atestado):not(#pane-atestado *),
      body[data-print="orcamento"] *:not(#pane-orcamento):not(#pane-orcamento *) {
        display: none !important;
      }

      .documento {
        background: #ffffff;
        color: #000000;
        border-color: #000000;
        box-shadow: none;
      }
    }

    @media (max-width: 640px) {
      .hero {
        padding: 14px;
      }
      .hero-text h1 {
        font-size: 1.1rem;
      }
      .hero-logo {
        width: 60px;
        height: 60px;
        font-size: 1.2rem;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- HERO TOPO -->
    <header class="hero">
      <div class="hero-text">
        <div class="hero-badge">
          üåÄ <span>BTX-TEC ‚Ä¢ Baixo Tocantins</span>
        </div>
        <h1>Ficha Cl√≠nica Digital</h1>
        <p>Prontu√°rio, receitu√°rio, atestado e or√ßamento odontol√≥gico em um s√≥ lugar.</p>
        <div class="hero-sub">Marca discreta, dados do dentista configur√°veis, pronto para web e app Android.</div>
      </div>
      <div class="hero-logo">
        <!-- hex√°gono simplificado com BTX -->
        <span>BTX</span>
      </div>
    </header>

    <!-- CONFIGURA√á√ÉO DO DENTISTA -->
    <section class="card card-config">
      <h2>Dados do dentista</h2>
      <p class="subtext">Preencha uma vez. Esses dados v√£o para o receitu√°rio, atestado e or√ßamento. N√£o fica seu nome fixo no c√≥digo.</p>

      <div class="row">
        <div>
          <label for="dentista_nome">Nome do dentista</label>
          <input type="text" id="dentista_nome" placeholder="Seu nome completo" />
        </div>
        <div>
          <label for="dentista_registro">CRO</label>
          <input type="text" id="dentista_registro" placeholder="CRO-PA xxxx" />
        </div>
      </div>

      <div class="row">
        <div>
          <label for="dentista_especialidade">Especialidade</label>
          <input type="text" id="dentista_especialidade" placeholder="Cirurgi√£o-Dentista / Especialidade" />
        </div>
        <div>
          <label for="dentista_telefone">Telefone / WhatsApp</label>
          <input type="tel" id="dentista_telefone" placeholder="(xx) xxxxx-xxxx" />
        </div>
      </div>

      <label for="dentista_endereco">Endere√ßo profissional</label>
      <input type="text" id="dentista_endereco" placeholder="Endere√ßo do consult√≥rio" />

      <button class="btn" id="btnSalvarDentista">Salvar dados do dentista</button>
    </section>

    <!-- ABAS -->
    <section class="card">
      <nav class="tabs no-print">
        <button class="tab-btn active" data-tab="ficha">Ficha Cl√≠nica</button>
        <button class="tab-btn" data-tab="receituario">Receitu√°rio</button>
        <button class="tab-btn" data-tab="atestado">Atestado</button>
        <button class="tab-btn" data-tab="orcamento">Or√ßamentos</button>
      </nav>

      <!-- CONTE√öDO DAS ABAS -->
      <!-- FICHA CL√çNICA -->
      <div class="tab-pane active" id="pane-ficha">
        <h2>Ficha Cl√≠nica do Paciente</h2>
        <p class="subtext">Campos livres para voc√™ escrever no formato SWAP/SOAP do jeito que estiver acostumado.</p>

        <fieldset>
          <legend>Dados de identifica√ß√£o</legend>

          <div class="row">
            <div>
              <label for="fc_nome">Nome completo</label>
              <input type="text" id="fc_nome" />
            </div>
            <div>
              <label for="fc_data_nascimento">Data de nascimento</label>
              <input type="date" id="fc_data_nascimento" />
            </div>
            <div>
              <label for="fc_idade">Idade</label>
              <input type="number" id="fc_idade" />
            </div>
          </div>

          <label for="fc_endereco">Endere√ßo</label>
          <input type="text" id="fc_endereco" />

          <div class="row">
            <div>
              <label for="fc_telefone">Telefone</label>
              <input type="tel" id="fc_telefone" />
            </div>
            <div>
              <label for="fc_nome_mae">Nome da m√£e</label>
              <input type="text" id="fc_nome_mae" />
            </div>
            <div>
              <label for="fc_nome_pai">Nome do pai</label>
              <input type="text" id="fc_nome_pai" />
            </div>
          </div>
        </fieldset>

        <fieldset>
          <legend>Queixa principal</legend>
          <textarea id="fc_queixa_principal" rows="3"
            placeholder="Espa√ßo livre para descrever a queixa principal (QP)..."></textarea>
        </fieldset>

        <fieldset>
          <legend>Hist√≥ria cl√≠nica</legend>
          <textarea id="fc_historia" rows="6"
            placeholder="HDA, antecedentes, hist√≥ria familiar, h√°bitos, medica√ß√µes, alergias, etc."></textarea>
        </fieldset>

        <fieldset>
          <legend>Procedimentos e valores</legend>
          <label for="fc_procedimentos">Procedimentos realizados / anota√ß√µes cl√≠nicas</label>
          <textarea id="fc_procedimentos" rows="4"
            placeholder="Descreva procedimentos realizados, condutas, regi√µes atendidas..."></textarea>

          <label for="fc_valores">Valores pagos / datas</label>
          <textarea id="fc_valores" rows="3"
            placeholder="Valores, forma de pagamento, datas..."></textarea>
        </fieldset>

        <button class="btn" id="btnSalvarFicha">Salvar ficha (local)</button>
      </div>

      <!-- RECEITU√ÅRIO -->
      <div class="tab-pane" id="pane-receituario">
        <h2>Receitu√°rio odontol√≥gico</h2>
        <p class="subtext">Os dados do cabe√ßalho v√™m da configura√ß√£o do dentista. Use os atalhos ou escreva manualmente.</p>

        <div class="documento">
          <div class="doc-header">
            <div class="doc-titulo">Receitu√°rio Odontol√≥gico</div>
            <div id="rx_profissional" class="doc-profissional">Configure seus dados acima.</div>
            <div id="rx_endereco" class="doc-endereco"></div>
          </div>

          <div class="doc-corpo">
            <div class="row">
              <div>
                <label for="rx_paciente">Paciente</label>
                <input type="text" id="rx_paciente" />
              </div>
              <div>
                <label for="rx_data">Data</label>
                <input type="date" id="rx_data" />
              </div>
            </div>

            <label>Atalhos de medicamentos</label>
            <div class="chip-group no-print">
              <button type="button" class="chip" data-rx="Paracetamol 750 mg VO, 1 comprimido de 8/8h por 3 dias.">
                Paracetamol 750 mg
              </button>
              <button type="button" class="chip" data-rx="Dipirona 500 mg VO, 1 comprimido de 6/6h se dor ou febre.">
                Dipirona 500 mg
              </button>
              <button type="button" class="chip" data-rx="Ibuprofeno 600 mg VO, 1 comprimido de 8/8h por 5 dias.">
                Ibuprofeno 600 mg
              </button>
              <button type="button" class="chip" data-rx="Amoxicilina 500 mg VO, 1 c√°psula de 8/8h por 7 dias.">
                Amoxicilina 500 mg
              </button>
              <button type="button" class="chip"
                data-rx="Amoxicilina 875 mg + clavulanato 125 mg VO, 1 comprimido de 12/12h por 7 dias.">
                Amox + Clav
              </button>
              <button type="button" class="chip" data-rx="Azitromicina 500 mg VO, 1 comprimido ao dia por 3 dias.">
                Azitromicina 500 mg
              </button>
            </div>

            <label for="rx_texto">Prescri√ß√£o</label>
            <textarea id="rx_texto" rows="7"
              placeholder="Escreva aqui a prescri√ß√£o completa, com posologia e orienta√ß√µes."></textarea>

            <div class="linha-assinatura">
              <span id="rx_assinatura">______________________________</span>
            </div>
          </div>
        </div>

        <div class="no-print" style="margin-top:8px;">
          <button class="btn" onclick="imprimirSecao('receituario')">Imprimir</button>
          <button class="btn btn-sec" onclick="imprimirSecao('receituario')">Salvar em PDF</button>
        </div>
      </div>

      <!-- ATESTADO -->
      <div class="tab-pane" id="pane-atestado">
        <h2>Atestado odontol√≥gico</h2>
        <p class="subtext">Texto livre para afastamento, justificativa escolar ou trabalhista.</p>

        <div class="documento">
          <div class="doc-header">
            <div class="doc-titulo">Atestado Odontol√≥gico</div>
            <div id="at_profissional" class="doc-profissional">Configure seus dados acima.</div>
            <div id="at_endereco" class="doc-endereco"></div>
          </div>

          <div class="doc-corpo">
            <div class="row">
              <div>
                <label for="at_paciente">Paciente</label>
                <input type="text" id="at_paciente" />
              </div>
              <div>
                <label for="at_data">Data</label>
                <input type="date" id="at_data" />
              </div>
            </div>

            <label for="at_texto">Texto do atestado</label>
            <textarea id="at_texto" rows="6"
              placeholder="Atesto, para os devidos fins, que o(a) paciente acima esteve sob meus cuidados odontol√≥gicos nesta data, necessitando de afastamento de ____ horas/dia(s)."></textarea>

            <div class="linha-assinatura">
              <span id="at_assinatura">______________________________</span>
            </div>
          </div>
        </div>

        <div class="no-print" style="margin-top:8px;">
          <button class="btn" onclick="imprimirSecao('atestado')">Imprimir</button>
          <button class="btn btn-sec" onclick="imprimirSecao('atestado')">Salvar em PDF</button>
        </div>
      </div>

      <!-- OR√áAMENTOS -->
      <div class="tab-pane" id="pane-orcamento">
        <h2>Or√ßamento odontol√≥gico</h2>
        <p class="subtext">Preencha os procedimentos e valores. O total √© calculado automaticamente.</p>

        <div class="documento">
          <div class="doc-header">
            <div class="doc-titulo">Or√ßamento Odontol√≥gico</div>
            <div id="orc_profissional" class="doc-profissional">Configure seus dados acima.</div>
            <div id="orc_endereco" class="doc-endereco"></div>
          </div>

          <div class="doc-corpo">
            <label for="orc_paciente">Paciente</label>
            <input type="text" id="orc_paciente" />

            <table>
              <thead>
                <tr>
                  <th>Procedimento</th>
                  <th>Valor (R$)</th>
                </tr>
              </thead>
              <tbody id="orc_tbody">
                <tr>
                  <td><input type="text" class="orc_proc" placeholder="Ex: Restaura√ß√£o em resina..."></td>
                  <td><input type="number" step="0.01" class="orc_valor" oninput="atualizarTotal()"></td>
                </tr>
                <tr>
                  <td><input type="text" class="orc_proc" placeholder="Ex: Exodontia..."></td>
                  <td><input type="number" step="0.01" class="orc_valor" oninput="atualizarTotal()"></td>
                </tr>
                <tr>
                  <td><input type="text" class="orc_proc"></td>
                  <td><input type="number" step="0.01" class="orc_valor" oninput="atualizarTotal()"></td>
                </tr>
                <tr>
                  <td><input type="text" class="orc_proc"></td>
                  <td><input type="number" step="0.01" class="orc_valor" oninput="atualizarTotal()"></td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <td>Total</td>
                  <td id="orc_total">R$ 0,00</td>
                </tr>
              </tfoot>
            </table>

            <div class="linha-assinatura">
              <span id="orc_assinatura">______________________________</span>
            </div>
          </div>
        </div>

        <div class="no-print" style="margin-top:8px;">
          <button class="btn" onclick="imprimirSecao('orcamento')">Imprimir</button>
          <button class="btn btn-sec" onclick="imprimirSecao('orcamento')">Salvar em PDF</button>
        </div>
      </div>
    </section>
  </div>

  <script>
    // ABAS
    document.querySelectorAll(".tab-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        const tab = btn.dataset.tab;
        document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
        document.querySelectorAll(".tab-pane").forEach(p => p.classList.remove("active"));

        btn.classList.add("active");
        document.getElementById("pane-" + tab).classList.add("active");
      });
    });

    // DADOS DO DENTISTA
    function carregarDentistaNaUI(dados) {
      const nome = dados.nome || "";
      const cro = dados.registro || "";
      const esp = dados.especialidade || "";
      const end = dados.endereco || "";
      const tel = dados.telefone || "";

      if (!document.getElementById("dentista_nome").value) document.getElementById("dentista_nome").value = nome;
      if (!document.getElementById("dentista_registro").value) document.getElementById("dentista_registro").value = cro;
      if (!document.getElementById("dentista_especialidade").value) document.getElementById("dentista_especialidade").value = esp;
      if (!document.getElementById("dentista_telefone").value) document.getElementById("dentista_telefone").value = tel;
      if (!document.getElementById("dentista_endereco").value) document.getElementById("dentista_endereco").value = end;

      const linhaProf = [nome, cro].filter(Boolean).join(" ‚Ä¢ ");
      const linhaEnd = [esp, end, tel].filter(Boolean).join(" ‚Ä¢ ");

      const mapeamentos = [
        ["rx_profissional", "rx_endereco", "rx_assinatura"],
        ["at_profissional", "at_endereco", "at_assinatura"],
        ["orc_profissional", "orc_endereco", "orc_assinatura"]
      ];

      mapeamentos.forEach(([idP, idE, idA]) => {
        const elP = document.getElementById(idP);
        const elE = document.getElementById(idE);
        const elA = document.getElementById(idA);
        if (elP) elP.textContent = linhaProf || "Configure seus dados acima.";
        if (elE) elE.textContent = linhaEnd;
        if (elA && nome) elA.textContent = `${nome} ‚Ä¢ ${cro}`.trim();
      });
    }

    function carregarDentista() {
      const dados = JSON.parse(localStorage.getItem("dadosDentista") || "{}");
      carregarDentistaNaUI(dados);
    }

    function salvarDentista() {
      const dados = {
        nome: document.getElementById("dentista_nome").value.trim(),
        registro: document.getElementById("dentista_registro").value.trim(),
        especialidade: document.getElementById("dentista_especialidade").value.trim(),
        endereco: document.getElementById("dentista_endereco").value.trim(),
        telefone: document.getElementById("dentista_telefone").value.trim()
      };
      localStorage.setItem("dadosDentista", JSON.stringify(dados));
      alert("Dados do dentista salvos com sucesso.");
      carregarDentistaNaUI(dados);
    }

    // SALVAR FICHA (LOCAL)
    function salvarFicha() {
      const ficha = {
        nome: document.getElementById("fc_nome").value,
        dataNascimento: document.getElementById("fc_data_nascimento").value,
        idade: document.getElementById("fc_idade").value,
        endereco: document.getElementById("fc_endereco").value,
        telefone: document.getElementById("fc_telefone").value,
        mae: document.getElementById("fc_nome_mae").value,
        pai: document.getElementById("fc_nome_pai").value,
        queixa: document.getElementById("fc_queixa_principal").value,
        historia: document.getElementById("fc_historia").value,
        procedimentos: document.getElementById("fc_procedimentos").value,
        valores: document.getElementById("fc_valores").value,
        dataHora: new Date().toISOString()
      };
      const lista = JSON.parse(localStorage.getItem("fichasPacientes") || "[]");
      lista.push(ficha);
      localStorage.setItem("fichasPacientes", JSON.stringify(lista));
      alert("Ficha cl√≠nica salva localmente neste dispositivo.");
    }

    // CHIPS DE MEDICAMENTO
    document.addEventListener("click", (e) => {
      if (e.target.classList.contains("chip")) {
        const texto = e.target.getAttribute("data-rx") || "";
        const Campo = document.getElementById("rx_texto");
        if (Campo) {
          const atual = Campo.value.trim();
          Campo.value = (atual ? atual + "\n" : "") + texto;
        }
      }
    });

    // TOTAL OR√áAMENTO
    function atualizarTotal() {
      const campos = document.querySelectorAll(".orc_valor");
      let total = 0;
      campos.forEach(c => {
        const v = parseFloat(c.value.replace(",", "."));
        if (!isNaN(v)) total += v;
      });
      document.getElementById("orc_total").textContent = "R$ " + total.toFixed(2).replace(".", ",");
    }

    // IMPRESS√ÉO (papel ou PDF)
    function imprimirSecao(secao) {
      document.body.setAttribute("data-print", secao);
      window.print();
      document.body.removeAttribute("data-print");
    }

    // INICIALIZA√á√ÉO
    document.addEventListener("DOMContentLoaded", () => {
      carregarDentista();

      const btnDentista = document.getElementById("btnSalvarDentista");
      if (btnDentista) btnDentista.addEventListener("click", salvarDentista);

      const btnFicha = document.getElementById("btnSalvarFicha");
      if (btnFicha) btnFicha.addEventListener("click", salvarFicha);

      const hoje = new Date().toISOString().slice(0, 10);
      const rxData = document.getElementById("rx_data");
      const atData = document.getElementById("at_data");
      if (rxData && !rxData.value) rxData.value = hoje;
      if (atData && !atData.value) atData.value = hoje;
    });

    // Deixar fun√ß√µes globais para os bot√µes inline
    window.atualizarTotal = atualizarTotal;
    window.imprimirSecao = imprimirSecao;
  </script>
</body>
</html>
